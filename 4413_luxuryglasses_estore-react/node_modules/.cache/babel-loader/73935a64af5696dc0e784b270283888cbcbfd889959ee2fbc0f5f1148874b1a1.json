{"ast":null,"code":"import _slicedToArray from\"/Users/amandama/Documents/GitHub/EECS4413-Project/4413_luxuryglasses_estore-react/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import{Link}from'react-router-dom';import'./drop-down.css';// var userDataObj;\n// const getAccountDetails = async(e) => {\n// }\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var DropDown=function DropDown(props){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isAdmin=_useState2[0],setIsAdmin=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isLoggedIn=_useState4[0],setIsLoggedIn=_useState4[1];var userDataObj;useEffect(function(){alert(\"useEffect drop-down\");var url=\"http://localhost:8080/getAccountDetails\";var request=new XMLHttpRequest();// create a connection\nrequest.open('POST',url);request.send();// send the http request\nrequest.onload=function(){// When the response comes invoke the following function\nvar data=request.responseText;// store reponse in variable and convert to JSON object\nif(data.length==0){// set not logged in >> only show login tab\nsetIsLoggedIn(false);document.getElementById(\"drop-down-logout\").style.display='none';}else{userDataObj=JSON.parse(data);// set is logged in\nsetIsLoggedIn(true);// if is admin >> sho admin tabs\nif(userDataObj.accountType==\"ADMIN\"){setIsAdmin(true);}}};});return/*#__PURE__*/_jsx(\"div\",{className:\"drop-down-sidebar \".concat(props.rootClassName,\" \"),onLoad:getAccountDetails,children:/*#__PURE__*/_jsxs(\"nav\",{className:\"drop-down-nav\",children:[isLoggedIn?/*#__PURE__*/_jsx(Link,{to:\"/account\",className:\"drop-down-text\",id:\"drop-down-account\",children:/*#__PURE__*/_jsx(\"span\",{children:\"Account\"})}):null,isAdmin?/*#__PURE__*/_jsx(Link,{to:\"/monthlysale\",className:\"drop-down-text1\",id:\"drop-down-sales\",children:/*#__PURE__*/_jsx(\"span\",{children:\"Sale Reports\"})}):null,isAdmin?/*#__PURE__*/_jsx(Link,{to:\"/webusage\",className:\"drop-down-text2\",id:\"drop-down-webuse\",children:/*#__PURE__*/_jsx(\"span\",{children:\"Web Usage Reports\"})}):null,isLoggedIn?/*#__PURE__*/_jsx(\"span\",{className:\"drop-down-text4\",id:\"drop-down-logout\",children:\"Logout\"}):/*#__PURE__*/_jsx(Link,{to:\"/loginPage\",className:\"drop-down-text3\",id:\"drop-down-login\",children:/*#__PURE__*/_jsx(\"span\",{children:\"Login\"})})]})});};DropDown.defaultProps={rootClassName:''};export default DropDown;","map":{"version":3,"names":["React","useState","Link","jsx","_jsx","jsxs","_jsxs","DropDown","props","_useState","_useState2","_slicedToArray","isAdmin","setIsAdmin","_useState3","_useState4","isLoggedIn","setIsLoggedIn","userDataObj","useEffect","alert","url","request","XMLHttpRequest","open","send","onload","data","responseText","length","document","getElementById","style","display","JSON","parse","accountType","className","concat","rootClassName","onLoad","getAccountDetails","children","to","id","defaultProps"],"sources":["/Users/amandama/Documents/GitHub/EECS4413-Project/4413_luxuryglasses_estore-react/src/components/drop-down.js"],"sourcesContent":["import React, { useState } from 'react'\nimport { Link } from 'react-router-dom'\n\nimport PropTypes from 'prop-types'\n\nimport './drop-down.css'\n\n// var userDataObj;\n\n// const getAccountDetails = async(e) => {\n\n// }\n\nconst DropDown = (props) => {\n  const [isAdmin, setIsAdmin] = useState(false);\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\n  var userDataObj;\n\n  useEffect(() => {\n    alert(\"useEffect drop-down\");\n  \n    var url=\"http://localhost:8080/getAccountDetails\";\n    var request = new XMLHttpRequest(); // create a connection\n    request.open('POST', url);\n    request.send(); // send the http request\n    request.onload = function() { // When the response comes invoke the following function\n      let data = request.responseText; // store reponse in variable and convert to JSON object\n      if (data.length == 0) {\n        // set not logged in >> only show login tab\n        setIsLoggedIn(false);\n        document.getElementById(\"drop-down-logout\").style.display = 'none';\n  \n      } else {\n        userDataObj = JSON.parse(data);\n  \n        // set is logged in\n        setIsLoggedIn(true);\n        \n        // if is admin >> sho admin tabs\n        if (userDataObj.accountType == \"ADMIN\") {\n          setIsAdmin(true);\n        }\n      }\n    }\n  });\n\n  return (\n    <div className={`drop-down-sidebar ${props.rootClassName} `} onLoad={getAccountDetails}>\n      <nav className=\"drop-down-nav\">\n        { \n          isLoggedIn? <Link to=\"/account\" className=\"drop-down-text\" id=\"drop-down-account\">\n            <span>Account</span>\n          </Link> : null\n        }\n        \n        {\n          isAdmin? <Link to=\"/monthlysale\" className=\"drop-down-text1\" id=\"drop-down-sales\">\n            <span>Sale Reports</span>\n          </Link> : null\n        } \n\n        {\n          isAdmin? <Link to=\"/webusage\" className=\"drop-down-text2\" id=\"drop-down-webuse\">\n            <span>Web Usage Reports</span>\n          </Link> : null\n        }\n\n        {\n          isLoggedIn? <span className=\"drop-down-text4\" id=\"drop-down-logout\">\n          Logout</span> : <Link to=\"/loginPage\" className=\"drop-down-text3\" id=\"drop-down-login\">\n            <span>Login</span>\n          </Link>\n        }\n        \n      </nav>\n    </div>\n  )\n}\n\nDropDown.defaultProps = {\n  rootClassName: '',\n}\n\nDropDown.propTypes = {\n  rootClassName: PropTypes.string,\n}\n\nexport default DropDown\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}