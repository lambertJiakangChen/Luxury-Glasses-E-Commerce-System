{"ast":null,"code":"import _regeneratorRuntime from\"/Users/anushanarraidoo/Documents/GitHub/EECS4413-Project/4413_luxuryglasses_estore-react/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/anushanarraidoo/Documents/GitHub/EECS4413-Project/4413_luxuryglasses_estore-react/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import React from'react';import{useParams,useNavigate}from'react-router-dom';import'./add-review.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var AddReview=function AddReview(props){var _useParams=useParams(),itemId=_useParams.itemId;var navigate=useNavigate();/*  const submitHandler = async(e) => {\n\t  e.preventDefault();\n\t  \n\t  let rating = document.getElementById(\"rating-select-review\").value;\n\t  let comments = document.getElementById(\"comments-input-review\").value;\n\t  let userEmail = document.getElementById(\"email-input-review\").value;\n\t  \n      var url= \"http://localhost:8080/catalog/addReview?item=\" + itemId + \"&rating=\" + rating \n      + \"&comments=\" + comments + \"&userEmail=\" + userEmail;\n      var request = new XMLHttpRequest();\n      request.open('POST', url);\n      request.send();\n      request.onload = function() {\n        let data = request.responseText;\n        if (data.includes(\"Review added\")){\n          alert(\"Thanks for the review\");\n          var form = document.getElementsByClassName(\"add-review-form\")[0];\n          form.reset();  // Reset all form data\n          \n          url=\"http://localhost:8080/catalog/findItem?itemId=\" + itemId;\n          //request = new XMLHttpRequest();\n\t      request.open('POST', url);\n\t      request.send(); \n\t      request.onload = function() {\n\t\t  data2 = request.response;\n      \t\tif (data.length != 0) {\n\t\t\t\t  var userDataObj = JSON.parse(data2);\n\t\t\t\t  alert(userDataObj.reviews.length);\n\t\t\t\t  //props.updateReviewCount(userDataObj.reviews.length);\n\t\t\t\t  document.getElementById(\"item-review-number\").innerHTML = \"Number of reviews: \" + userDataObj.reviews.length;\n\t\t\t}\n\t\t  \n          //navigate(`/productsitem1/${itemId}`);\n          }\n          \n        } else {\n          alert(\"Error occurred: \" + data);\n        }\n      }\n  }*/var submitHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var rating,comments,userEmail,url,response,data,form,itemUrl,itemResponse,itemData;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:e.preventDefault();rating=document.getElementById(\"rating-select-review\").value;comments=document.getElementById(\"comments-input-review\").value;userEmail=document.getElementById(\"email-input-review\").value;url=\"http://localhost:8080/catalog/addReview?item=\".concat(itemId,\"&rating=\").concat(rating,\"&comments=\").concat(comments,\"&userEmail=\").concat(userEmail);_context.prev=5;_context.next=8;return fetch(url,{method:\"GET\"});case 8:response=_context.sent;if(response.ok){_context.next=11;break;}throw new Error(\"HTTP error \"+response.status);case 11:_context.next=13;return response.text();case 13:data=_context.sent;if(!data.includes(\"Review added\")){_context.next=30;break;}alert(\"Thanks for the review\");form=document.getElementsByClassName(\"add-review-form\")[0];form.reset();itemUrl=\"http://localhost:8080/catalog/findItem?itemId=\".concat(itemId);_context.next=21;return fetch(itemUrl,{method:\"GET\"});case 21:itemResponse=_context.sent;if(itemResponse.ok){_context.next=24;break;}throw new Error(\"HTTP error \"+itemResponse.status);case 24:_context.next=26;return itemResponse.json();case 26:itemData=_context.sent;document.getElementById(\"item-review-number\").innerHTML=\"Number of reviews: \"+itemData.reviews.length;_context.next=31;break;case 30:alert(\"Error occurred: \"+data);case 31:_context.next=37;break;case 33:_context.prev=33;_context.t0=_context[\"catch\"](5);console.error(_context.t0);alert(\"Error occurred: \"+_context.t0.message);case 37:case\"end\":return _context.stop();}},_callee,null,[[5,33]]);}));return function submitHandler(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{id:\"add-review-container\",className:\"add-review-container\",children:[/*#__PURE__*/_jsx(\"h3\",{children:props.heading}),/*#__PURE__*/_jsxs(\"form\",{className:\"add-review-form\",action:\"/catalog/addReview\",method:\"GET\",enctype:\"application/x-www-form-urlencoded\",onSubmit:submitHandler,children:[/*#__PURE__*/_jsxs(\"label\",{id:\"email-label-review\",htmlFor:\"email-input-review\",className:\"add-review-text1\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"EMAIL\"}),/*#__PURE__*/_jsx(\"br\",{})]}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",id:\"email-input-review\",name:\"email\",pattern:\"^[a-zA-Z0-9_!#$%&'*+/=?`{|}~^.-]+@[a-zA-Z0-9.-]+$\",required:true,placeholder:props.textinput_placeholder,className:\"add-review-textinput input\"}),/*#__PURE__*/_jsx(\"label\",{id:\"comments-label-review\",htmlFor:\"comments-input-review\",className:\"add-review-text4\",children:props.text}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"comments-input-review\",name:\"comments\",required:true,placeholder:props.textinput_placeholder1,className:\"add-review-textinput1 input\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"rating\",id:\"rating-select-review\",className:\"add-review-select\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"1\",children:\"1\"}),/*#__PURE__*/_jsx(\"option\",{value:\"2\",children:\"2\"}),/*#__PURE__*/_jsx(\"option\",{value:\"3\",children:\"3\"}),/*#__PURE__*/_jsx(\"option\",{value:\"4\",children:\"4\"}),/*#__PURE__*/_jsx(\"option\",{value:\"5\",children:\"5\"})]}),/*#__PURE__*/_jsx(\"button\",{id:\"add-review-button\",className:\"add-review-button button\",type:\"submit\",children:props.button})]})]});};AddReview.defaultProps={heading:'Add Review:',textinput_placeholder:'email',text:'COMMENTS',textinput_placeholder1:'comments',button:'Submit Review'};export default AddReview;","map":{"version":3,"names":["React","useParams","useNavigate","jsx","_jsx","jsxs","_jsxs","AddReview","props","_useParams","itemId","navigate","submitHandler","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","e","rating","comments","userEmail","url","response","data","form","itemUrl","itemResponse","itemData","wrap","_callee$","_context","prev","next","preventDefault","document","getElementById","value","concat","fetch","method","sent","ok","Error","status","text","includes","alert","getElementsByClassName","reset","json","innerHTML","reviews","length","t0","console","error","message","stop","_x","apply","arguments","id","className","children","heading","action","enctype","onSubmit","htmlFor","type","name","pattern","required","placeholder","textinput_placeholder","textinput_placeholder1","button","defaultProps"],"sources":["/Users/anushanarraidoo/Documents/GitHub/EECS4413-Project/4413_luxuryglasses_estore-react/src/components/add-review.js"],"sourcesContent":["import React from 'react'\nimport { useParams, useNavigate } from 'react-router-dom'\nimport PropTypes from 'prop-types'\n\nimport './add-review.css'\n\nconst AddReview = (props) => {\n\tconst { itemId } = useParams();\n\tconst navigate = useNavigate();\n\t\n\n\t\n/*  const submitHandler = async(e) => {\n\t  e.preventDefault();\n\t  \n\t  let rating = document.getElementById(\"rating-select-review\").value;\n\t  let comments = document.getElementById(\"comments-input-review\").value;\n\t  let userEmail = document.getElementById(\"email-input-review\").value;\n\t  \n      var url= \"http://localhost:8080/catalog/addReview?item=\" + itemId + \"&rating=\" + rating \n      + \"&comments=\" + comments + \"&userEmail=\" + userEmail;\n      var request = new XMLHttpRequest();\n      request.open('POST', url);\n      request.send();\n      request.onload = function() {\n        let data = request.responseText;\n        if (data.includes(\"Review added\")){\n          alert(\"Thanks for the review\");\n          var form = document.getElementsByClassName(\"add-review-form\")[0];\n          form.reset();  // Reset all form data\n          \n          url=\"http://localhost:8080/catalog/findItem?itemId=\" + itemId;\n          //request = new XMLHttpRequest();\n\t      request.open('POST', url);\n\t      request.send(); \n\t      request.onload = function() {\n\t\t  data2 = request.response;\n      \t\tif (data.length != 0) {\n\t\t\t\t  var userDataObj = JSON.parse(data2);\n\t\t\t\t  alert(userDataObj.reviews.length);\n\t\t\t\t  //props.updateReviewCount(userDataObj.reviews.length);\n\t\t\t\t  document.getElementById(\"item-review-number\").innerHTML = \"Number of reviews: \" + userDataObj.reviews.length;\n\t\t\t}\n\t\t  \n          //navigate(`/productsitem1/${itemId}`);\n          }\n          \n        } else {\n          alert(\"Error occurred: \" + data);\n        }\n      }\n  }*/\n  \n  const submitHandler = async (e) => {\n  e.preventDefault();\n\n  const rating = document.getElementById(\"rating-select-review\").value;\n  const comments = document.getElementById(\"comments-input-review\").value;\n  const userEmail = document.getElementById(\"email-input-review\").value;\n\n  const url = `http://localhost:8080/catalog/addReview?item=${itemId}&rating=${rating}&comments=${comments}&userEmail=${userEmail}`;\n  try {\n    const response = await fetch(url, { method: \"GET\" });\n    if (!response.ok) {\n      throw new Error(\"HTTP error \" + response.status);\n    }\n\n    const data = await response.text();\n    if (data.includes(\"Review added\")) {\n      alert(\"Thanks for the review\");\n      const form = document.getElementsByClassName(\"add-review-form\")[0];\n      form.reset();\n\n      const itemUrl = `http://localhost:8080/catalog/findItem?itemId=${itemId}`;\n      const itemResponse = await fetch(itemUrl, { method: \"GET\" });\n      if (!itemResponse.ok) {\n        throw new Error(\"HTTP error \" + itemResponse.status);\n      }\n\n      const itemData = await itemResponse.json();\n      document.getElementById(\"item-review-number\").innerHTML =\n        \"Number of reviews: \" + itemData.reviews.length;\n    } else {\n      alert(\"Error occurred: \" + data);\n    }\n  } catch (error) {\n    console.error(error);\n    alert(\"Error occurred: \" + error.message);\n  }\n};\n\n\t\n  return (\n    <div id=\"add-review-container\" className=\"add-review-container\">\n      <h3>{props.heading}</h3>\n      <form className=\"add-review-form\" \n        action=\"/catalog/addReview\"\n        method=\"GET\"\n        enctype=\"application/x-www-form-urlencoded\"\n        onSubmit={submitHandler}>\n        <label\n          id=\"email-label-review\"\n          htmlFor=\"email-input-review\"\n          className=\"add-review-text1\"\n        >\n          <span>EMAIL</span>\n          <br></br>\n        </label>\n        <input\n          type=\"email\"\n          id=\"email-input-review\"\n          name=\"email\"\n          pattern=\"^[a-zA-Z0-9_!#$%&'*+/=?`{|}~^.-]+@[a-zA-Z0-9.-]+$\"\n          required\n          placeholder={props.textinput_placeholder}\n          className=\"add-review-textinput input\"\n        />\n        <label\n          id=\"comments-label-review\"\n          htmlFor=\"comments-input-review\"\n          className=\"add-review-text4\"\n        >\n          {props.text}\n        </label>\n        <input\n          type=\"text\"\n          id=\"comments-input-review\"\n          name=\"comments\"\n          required\n          placeholder={props.textinput_placeholder1}\n          className=\"add-review-textinput1 input\"\n        />\n        <select\n          name=\"rating\"\n          id=\"rating-select-review\"\n          className=\"add-review-select\"\n        >\n          <option value=\"1\">1</option>\n          <option value=\"2\">2</option>\n          <option value=\"3\">3</option>\n          <option value=\"4\">4</option>\n          <option value=\"5\">5</option>\n        </select>\n        <button id=\"add-review-button\" className=\"add-review-button button\" type=\"submit\">\n          {props.button}\n        </button>\n      </form>\n    </div>\n  )\n}\n\nAddReview.defaultProps = {\n  heading: 'Add Review:',\n  textinput_placeholder: 'email',\n  text: 'COMMENTS',\n  textinput_placeholder1: 'comments',\n  button: 'Submit Review',\n}\n\nAddReview.propTypes = {\n  heading: PropTypes.string,\n  textinput_placeholder: PropTypes.string,\n  text: PropTypes.string,\n  textinput_placeholder1: PropTypes.string,\n  button: PropTypes.string,\n}\n\nexport default AddReview"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}